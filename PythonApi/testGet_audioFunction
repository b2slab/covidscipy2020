import requests as req
import numpy as np
import json

#Get all
username = input("Type a username: ")
url = f'http://127.0.0.1:5000/rawAudio/{username}?pretty'
resp = req.get(url).json()
#print(resp.text) # Printing response

audio = np.array(json.loads(resp["audio_file"]))
sample_rate = int(resp["sample_rate"])

from wavio import write
write(f"{username}.wav", audio.astype('float'), sample_rate, sampwidth=3)
print(f"File downloaded in {username}.wav")
#Get specific user (can perform url request with either                                
# /data/<username> or /data/<_id>)                                                     
#url = 'http://127.0.0.1:5000/data/TestUser130?pretty'                                 
#resp = req.get(url)                                                                   
#print(resp.text) # Printing response













